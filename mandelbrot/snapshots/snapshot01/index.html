<html>

<head>
  <title>Mandelbrot Set in WebGL</title>

  <script src="gl-matrix.js"></script>

  <script id="shader-vs" type="x-shader/x-vertex">
      attribute vec3 aVertexPosition;

      uniform mat4 uMVMatrix;
      uniform mat4 uPMatrix;
      varying vec2 coordinates;

      void main(void) {
          gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
          coordinates = vec2(aVertexPosition.x, aVertexPosition.y);
      }
  </script>


  <script id="shader-fs" type="x-shader/x-fragment">
      precision mediump float;
      uniform float time;
      varying vec2 coordinates;
      const int maxIterations = 100;

      void main(void) {
        float cReal = coordinates.x;
        float cImag = coordinates.y;

        float zReal = cReal;//0.0;
        float zImag = cImag;//0.0;

        int numIterations = maxIterations;

        for(int i = 0; i < maxIterations; i++){
          if((zReal * zReal + zImag * zImag) > 1.0){
            numIterations = i;
            break;
          }
        }

        if(numIterations == maxIterations){
          gl_FragColor = vec4(
            sin(time)/2.0 + 0.5,
            coordinates.x,
            coordinates.y,
            1.0);
        }
        else{
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      }
  </script>
  <script src="requestAnimFrame.js"></script>
  <script src="script.js"> </script>

</head>

<body onload="webGLStart();" style="margin:0">
  <canvas id="canvas" style="border: none;" width="500" height="500"></canvas>
</body>
</html>
